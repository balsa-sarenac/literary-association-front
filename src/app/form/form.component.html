<form *ngIf="dataLoaded" (ngSubmit)="onSubmit(form.value, form)" style="width: 40%; display: inline-block"
	[formGroup]="form">
	<div *ngFor="let field of formFields" class="form-group" style="text-align: left">
		<label for="{{ field.id }}">{{ field.label }}</label>

		<input class="form-control" type="password" formControlName={{field.id}}
			*ngIf="(field.id=='password') && field.type.name=='string'">
		<input class="form-control" type="text" formControlName={{field.id}}
			*ngIf="field.type.name=='string' && field.id!='password'">
		<input class="form-control" type="checkbox" formControlName={{field.id}} *ngIf="field.type.name=='boolean'">
		<input class="form-control" type="number" formControlName={{field.id}} *ngIf="field.type.name=='long'">
		<input class="form-control-file" type="file" formControlName={{field.id}} accept="pdf/*"
		*ngIf="field.id=='files'" (change)="handleFileInput($event)" multiple>
		<div *ngIf="field.type.name=='multiselect'" class="form-group">
			<select multiple class="form-control" formControlName={{field.id}} multiple aria-label="multiple select example">
				<option *ngFor="let value of field.type.values" [value]="value">
					{{value}}
				</option>
			</select>
		</div>

		<div *ngFor="let validator of field.validationConstraints">
			<div *ngIf="
						validator.name == 'required' &&
						form.controls[field.id].errors?.validator &&
						form.controls[field.id].touched
					">
				{{ field.id }} is required!
			</div>
			<div *ngIf="
						validator.name == 'minlength' &&
						form.controls[field.id].errors?.minlength &&
						form.controls[field.id].touched
					">
				Minimun length is {{ validator.configuration }}
			</div>
		</div>
	</div>

	<input class="btn btn-primary" type="submit" [disabled]="form.invalid" />
</form>